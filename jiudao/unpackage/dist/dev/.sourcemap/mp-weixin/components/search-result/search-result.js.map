{"version":3,"sources":["webpack:///D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue","webpack:///D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue?4463","webpack:///D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue?ed81","webpack:///D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue?6940","webpack:///D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue?36ad","webpack:///D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue?a271","webpack:///D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue?b3d6"],"names":["props","query","type","String","default","data","historyList","hotList","searchList","created","uni","getStorageSync","_getHotSearchKey","methods","onQuerySelected","e","$emit","params","then","res","statusCode","ERR_OK","hot","_getSearchList","books","_setHistorySearchKey","q","includes","index","findIndex","item","splice","unshift","setStorageSync","watch","summary","components","SearchKey","BookList"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAcA;AACA,oH;;AAEe;AACdA,OAAK,EAAE;AACNC,SAAK,EAAE;AACNC,UAAI,EAAEC,MADA;AAENC,aAAO,EAAE,EAFH,EADD,EADO;;;;AAQdC,MARc,kBAQP;AACN,WAAO;AACNC,iBAAW,EAAE,EADP;AAENC,aAAO,EAAE,EAFH;AAGNC,gBAAU,EAAE,EAHN,EAAP;;AAKA,GAda;;AAgBdC,SAhBc,qBAgBJ;;AAET;AACA,SAAKH,WAAL,GAAmBI,GAAG,CAACC,cAAJ,CAAmB,aAAnB,IAAoCD,GAAG,CAACC,cAAJ,CAAmB,aAAnB,CAApC,GAAwE,EAA3F;;AAEA,SAAKC,gBAAL;AACA,GAtBa;;AAwBdC,SAAO,EAAE;AACRC,mBADQ,2BACQC,CADR,EACW,CAAE;AACpB,UAAId,KAAK,GAAGc,CAAC,CAACd,KAAd;;AAEA;AACA,WAAKe,KAAL,CAAW,gBAAX,EAA6B,EAAEf,KAAK,EAAEA,KAAT,EAA7B;AACA,KANO;;AAQRW,oBARQ,8BAQsB,sBAAbK,MAAa,uEAAJ,EAAI;AAC7B,mCAAgBA,MAAhB,EAAwBC,IAAxB,CAA6B,UAAAC,GAAG,EAAI;AACnC,YAAIA,GAAG,CAACC,UAAJ,KAAmBC,cAAvB,EAA+B;AAC9B,eAAI,CAACd,OAAL,GAAeY,GAAG,CAACd,IAAJ,CAASiB,GAAxB;AACA;AACD,OAJD;AAKA,KAdO;;AAgBRC,kBAhBQ,4BAgBoB,uBAAbN,MAAa,uEAAJ,EAAI;AAC3B,iCAAcA,MAAd,EAAsBC,IAAtB,CAA2B,UAAAC,GAAG,EAAI;AACjC,YAAIA,GAAG,CAACC,UAAJ,KAAmBC,cAAvB,EAA+B;AAC9B,gBAAI,CAACb,UAAL,GAAkBW,GAAG,CAACd,IAAJ,CAASmB,KAA3B;AACA;AACD,OAJD;AAKA,WAAKC,oBAAL,CAA0BR,MAAM,CAACS,CAAjC;AACA,KAvBO;;AAyBRD,wBAzBQ,gCAyBaxB,KAzBb,EAyBoB,CAAE;AAC7B,UAAIK,WAAW,GAAGI,GAAG,CAACC,cAAJ,CAAmB,aAAnB,CAAlB;;AAEA,UAAIL,WAAJ,EAAiB,CAAE;AAClB;AACA,YAAIA,WAAW,CAACqB,QAAZ,CAAqB1B,KAArB,CAAJ,EAAiC;AAChC;AACA,cAAI2B,KAAK,GAAGtB,WAAW,CAACuB,SAAZ,CAAsB,UAACC,IAAD,EAAU;AAC3C,mBAAOA,IAAI,KAAK7B,KAAhB;AACA,WAFW,CAAZ;AAGAK,qBAAW,CAACyB,MAAZ,CAAmBH,KAAnB,EAA0B,CAA1B;AACA;;AAED;AACAtB,mBAAW,CAAC0B,OAAZ,CAAoB/B,KAApB;;AAEAS,WAAG,CAACuB,cAAJ,CAAmB,aAAnB,EAAkC3B,WAAlC;;AAEA,aAAKA,WAAL,GAAmBA,WAAnB;AACA,OAhBD,MAgBO,CAAE;AACR;AACA,YAAIA,YAAW,GAAG,EAAlB;AACAA,oBAAW,CAAC0B,OAAZ,CAAoB/B,KAApB;AACAS,WAAG,CAACuB,cAAJ,CAAmB,aAAnB,EAAkC3B,YAAlC;;AAEA,aAAKA,WAAL,GAAmBA,YAAnB;AACA;AACD,KApDO,EAxBK;;;AA+Ed4B,OAAK,EAAE;AACNjC,SADM,iBACAA,MADA,EACO,CAAE;AACd,UAAIA,MAAJ,EAAW;AACV,YAAIgB,MAAM,GAAG,EAAE;AACdkB,iBAAO,EAAE,CADG;AAEZT,WAAC,EAAEzB,MAFS,EAAb;;AAIA,aAAKsB,cAAL,CAAoBN,MAApB;AACA,OAND,MAMO,CAAE;AACR,aAAKT,UAAL,GAAkB,EAAlB;AACA;AACD,KAXK,EA/EO;;;AA6Fd4B,YAAU,EAAE;AACXC,aAAS,EAATA,SADW;AAEXC,YAAQ,EAARA,QAFW,EA7FE,E;;;;;;;;;;;;ACjBf,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwG;AACvC;AACL;AACqC;;;AAGjG;AAC4H;AAC5H,gBAAgB,0IAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,oGAAM;AACR,EAAE,6GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAA8jB,CAAgB,4lBAAG,EAAC,C;;;;;;;;;;;;ACAllB;AAAA;AAAA;AAAA;AAA2zB,CAAgB,q0BAAG,EAAC,C;;;;;;;;;;;;ACA/0B;AAAA;AAAA;AAAA;AAAA;AAAA","file":"components/search-result/search-result.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SearchKey from 'components/search-key/search-key'\nimport BookList from 'components/book-list/book-list'\nimport { getHotSearchKey, getSearchList } from 'common/api/search'\nimport { ERR_OK } from 'common/api/config'\n\nexport default {\n\tprops: {\n\t\tquery: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t}\n\t},\n\t\n\tdata() {\n\t\treturn {\n\t\t\thistoryList: [],\n\t\t\thotList: [],\n\t\t\tsearchList: []\n\t\t}\n\t},\n\n\tcreated() {\n\t\t\n\t\t// 初始化搜索历史\n\t\tthis.historyList = uni.getStorageSync('historyList') ? uni.getStorageSync('historyList') : []\n\t\t\n\t\tthis._getHotSearchKey()\n\t},\n\n\tmethods: {\n\t\tonQuerySelected(e) { // 搜索关键字点击事件处理\n\t\t\tlet query = e.query\n\t\t\t\n\t\t\t// 将选择的搜索关键字通过事件传递到父组件\n\t\t\tthis.$emit('query-selected', { query: query })\n\t\t},\n\t\t\n\t\t_getHotSearchKey(params = {}) {\n\t\t\tgetHotSearchKey(params).then(res => {\n\t\t\t\tif (res.statusCode === ERR_OK) {\n\t\t\t\t\tthis.hotList = res.data.hot\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t_getSearchList(params = {}) {\n\t\t\tgetSearchList(params).then(res => {\n\t\t\t\tif (res.statusCode === ERR_OK) {\n\t\t\t\t\tthis.searchList = res.data.books\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis._setHistorySearchKey(params.q)\n\t\t},\n\t\t\n\t\t_setHistorySearchKey(query) { // 保存搜索历史\n\t\t\tlet historyList = uni.getStorageSync('historyList')\n\t\t\t\n\t\t\tif (historyList) { // 如果有搜索历史\n\t\t\t\t// 如果有该查询关键字，则删除数组中的该值\n\t\t\t\tif (historyList.includes(query)) {\n\t\t\t\t\t// 获取关键字索引\n\t\t\t\t\tlet index = historyList.findIndex((item) => {\n\t\t\t\t\t\treturn item === query\n\t\t\t\t\t})\n\t\t\t\t\thistoryList.splice(index, 1)\n\t\t\t\t}\n\t\t\t\n\t\t\t\t// unshift() 方法用于向数组头部添加内容，会改变原数组，返回新数组的长度\n\t\t\t\thistoryList.unshift(query)\n\t\t\t\n\t\t\t\tuni.setStorageSync('historyList', historyList)\n\t\t\t\n\t\t\t\tthis.historyList = historyList\n\t\t\t} else { // 如果没有搜索历史\n\t\t\t\t// 新建搜索历史数组，添加并保存到本地\n\t\t\t\tlet historyList = []\n\t\t\t\thistoryList.unshift(query)\n\t\t\t\tuni.setStorageSync('historyList', historyList)\n\t\t\t\t\n\t\t\t\tthis.historyList = historyList\n\t\t\t}\n\t\t}\n\t},\n\t\n\twatch: {\n\t\tquery(query) { // 当搜索框关键字改变时触发\n\t\t\tif (query) {\n\t\t\t\tlet params = { // 搜索条件配置\n\t\t\t\t\tsummary: 1,\n\t\t\t\t\tq: query\n\t\t\t\t}\n\t\t\t\tthis._getSearchList(params)\n\t\t\t} else { // 当搜索框查询关键字为空时，清空搜索记录\n\t\t\t\tthis.searchList = []\n\t\t\t}\n\t\t}\n\t},\n\n\tcomponents: {\n\t\tSearchKey,\n\t\tBookList\n\t}\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=0700e508&scoped=true&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-result.vue?vue&type=style&index=0&id=0700e508&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0700e508\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0700e508', component.options)\n    } else {\n      api.reload('0700e508', component.options)\n    }\n    module.hot.accept(\"./search-result.vue?vue&type=template&id=0700e508&scoped=true&\", function () {\n      api.rerender('0700e508', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/HbuilderX-Storage/jiudao/components/search-result/search-result.vue\"\nexport default component.exports","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search-result.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search-result.vue?vue&type=style&index=0&id=0700e508&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search-result.vue?vue&type=style&index=0&id=0700e508&scoped=true&lang=css&\"","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search-result.vue?vue&type=template&id=0700e508&scoped=true&\""],"sourceRoot":""}