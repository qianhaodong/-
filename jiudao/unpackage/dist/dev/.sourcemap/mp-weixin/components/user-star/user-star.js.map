{"version":3,"sources":["webpack:///D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue","webpack:///D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue?8dac","webpack:///D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue?a544","webpack:///D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue?75b9","webpack:///D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue?b9c7","webpack:///D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue?cf21","webpack:///D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue?3f0f"],"names":["props","starNums","type","Number","default","data","created","console","log","methods","onStarTap","star_list","wx","getStorageSync","local_status","id","fav_nums","like_status","setData","index","findIndex","item","util","isObjectValueEqual","splice","setStorageSync","setStarNums","watch","starStatus","newVal","Object","keys","length","push"],"mappings":"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","file":"components/user-star/user-star.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n\nimport { mapMutations } from 'vuex'\n\nexport default {\n\tprops: {\n\t\tstarNums: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\t// localStarNums: this.starNums\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconsole.log(this.starNums)\n\t\t// this.setStarNums(this.starNums)\n\t},\n\n\tmethods: {\n\t\tonStarTap() {\n\t\t\tlet star_list = wx.getStorageSync('star_list')\n\t\t\tlet {\n\t\t\t\tid,\n\t\t\t\ttype,\n\t\t\t\tfav_nums,\n\t\t\t\tlike_status\n\t\t\t} = this.data.local_status\n\n\t\t\t// 判断点赞数量的增与减\n\t\t\tif (like_status) {\n\t\t\t\tfav_nums--\n\t\t\t} else {\n\t\t\t\tfav_nums++\n\t\t\t}\n\n\t\t\t// 更改点赞状态\n\t\t\tthis.setData({\n\t\t\t\tlocal_status: {\n\t\t\t\t\tid: id,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tfav_nums: fav_nums,\n\t\t\t\t\tlike_status: !like_status\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// 保存点赞状态（先获取当前项在本地存储数组中的位置）\n\t\t\tlet index = star_list.findIndex((item) => {\n\t\t\t\treturn util.isObjectValueEqual(item, this.data.local_status)\n\t\t\t})\n\n\t\t\t// 通过获取的位置去更新本地存储中当前项的值\n\t\t\tstar_list.splice(index, 1, this.data.local_status)\n\t\t\twx.setStorageSync('star_list', star_list)\n\t\t},\n\t\t\n\t\t...mapMutations({\n\t\t\tsetStarNums: 'SET_STARNUMS'\n\t\t})\n\t},\n\n\twatch: {\n\t\tstarStatus(newVal) {\n\t\t\tif (!Object.keys(newVal).length) return\n\n\t\t\tconsole.log(222222)\n\t\t\tlet star_list = wx.getStorageSync('star_list')\n\t\t\tif (star_list) {\n\n\t\t\t\t// 先判断本地存储中有无当前项的点赞信息\n\t\t\t\tlet index = star_list.findIndex((item) => {\n\t\t\t\t\treturn util.isObjectValueEqual(item, newVal)\n\t\t\t\t})\n\n\t\t\t\tif (index > -1) { // 有当前项的点赞信息\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tlocal_status: star_list[index]\n\t\t\t\t\t})\n\t\t\t\t} else { // 无当前项的点赞信息\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tlocal_status: newVal\n\t\t\t\t\t})\n\n\t\t\t\t\t// 保存点赞状态到本地存储\n\t\t\t\t\tstar_list.push(this.data.local_status)\n\t\t\t\t\twx.setStorageSync('star_list', star_list)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet star_list = [] // 用于存储点赞信息到本地\n\n\t\t\t\t// 将点赞信息保存到本地 data 中，防止监听器死循环\n\t\t\t\tthis.setData({\n\t\t\t\t\tlocal_status: newVal\n\t\t\t\t})\n\n\t\t\t\t// 保存点赞状态\n\t\t\t\tstar_list.push(this.data.local_status)\n\t\t\t\twx.setStorageSync('star_list', star_list)\n\t\t\t}\n\t\t}\n\t}\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./user-star.vue?vue&type=template&id=1247a128&scoped=true&\"\nimport script from \"./user-star.vue?vue&type=script&lang=js&\"\nexport * from \"./user-star.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user-star.vue?vue&type=style&index=0&id=1247a128&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1247a128\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('1247a128', component.options)\n    } else {\n      api.reload('1247a128', component.options)\n    }\n    module.hot.accept(\"./user-star.vue?vue&type=template&id=1247a128&scoped=true&\", function () {\n      api.rerender('1247a128', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/HbuilderX-Storage/jiudao/components/user-star/user-star.vue\"\nexport default component.exports","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-star.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-star.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-star.vue?vue&type=style&index=0&id=1247a128&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-star.vue?vue&type=style&index=0&id=1247a128&scoped=true&lang=css&\"","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-star.vue?vue&type=template&id=1247a128&scoped=true&\""],"sourceRoot":""}